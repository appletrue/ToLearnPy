# numpy å¿«é€Ÿå…¥é—¨å­¦ä¹ &å…·ä½“æ“ä½œ

------[å‚è€ƒåœ°å€ï¼š](https://docs.scipy.org/doc/numpy/user/quickstart.html) 

numpy ç”¨äºå¯¹çŸ©é˜µmatricçš„æ“ä½œï¼Œä¸€èˆ¬ä¼šç»“åˆPandasä¸€åŒimport 

- np.lookfor('create array')  #æŸ¥æ‰¾å‘½ä»¤
 
 
## æ•°ç»„æ¦‚å¿µ

NumPyçš„ä¸»è¦å¯¹è±¡æ˜¯åŒç±»å‹çš„å¤šç»´æ•°ç»„ã€‚å®ƒæ˜¯ä¸€å¼ è¡¨ï¼Œæ‰€æœ‰å…ƒç´ ï¼ˆé€šå¸¸æ˜¯æ•°å­—ï¼‰çš„ç±»å‹éƒ½ç›¸åŒï¼Œå¹¶é€šè¿‡æ­£æ•´æ•°å…ƒç»„ç´¢å¼•ã€‚åœ¨NumPyä¸­ï¼Œç»´åº¦ç§°ä¸ºè½´ã€‚è½´çš„æ•°ç›®ä¸ºrankã€‚

ä¾‹å¦‚ï¼Œ3Dç©ºé—´ä¸­çš„ç‚¹çš„åæ ‡[1, 2, 1]æ˜¯rankä¸º1çš„æ•°ç»„ï¼Œå› ä¸ºå®ƒå…·æœ‰ä¸€ä¸ªè½´ï¼ˆaxisï¼‰ã€‚è¯¥è½´çš„é•¿åº¦ä¸º3ã€‚
åœ¨ä¸‹å›¾æ‰€ç¤ºçš„ç¤ºä¾‹ä¸­ï¼Œæ•°ç»„çš„rankä¸º2ï¼ˆå®ƒæ˜¯2ç»´çš„ï¼‰ã€‚ç¬¬ä¸€ç»´åº¦ï¼ˆè½´ï¼‰çš„é•¿åº¦ä¸º2ï¼Œç¬¬äºŒç»´åº¦çš„é•¿åº¦ä¸º3ã€‚

[[ 1., 0., 0.],
 [ 0., 1., 2.]]

NumPyçš„æ•°ç»„çš„ç±»ç§°ä¸ºndarrayã€‚åˆ«åä¸ºarrayã€‚
è¯·æ³¨æ„ï¼Œnumpy.arrayä¸æ ‡å‡†Pythonåº“çš„ç±»array.arrayä¸åŒï¼Œåè€…ä»…å¤„ç†ä¸€ç»´æ•°ç»„å¹¶æä¾›è¾ƒå°‘çš„åŠŸèƒ½ã€‚

ğŸŒ¹æ³¨æ„ï¼š numpy ä¸­æ•°ç»„arrayå’ŒçŸ©é˜µmatricçš„åŒºåˆ«ï¼š  

NumPyå‡½æ•°åº“ä¸­å­˜åœ¨ä¸¤ç§ä¸åŒçš„æ•°æ®ç±»å‹ï¼ˆçŸ©é˜µmatrixå’Œæ•°ç»„arrayï¼‰ï¼Œéƒ½å¯ä»¥ç”¨äºå¤„ç†è¡Œåˆ—è¡¨ç¤ºçš„æ•°å­—å…ƒç´ ã€‚

çœ‹èµ·æ¥ç›¸ä¼¼ï¼Œä½†å½“æ‰§è¡ŒåŒæ ·çš„æ•°å­¦è¿ç®—æ—¶ï¼Œæœ‰å¯èƒ½ä¼šå¾—åˆ°ä¸åŒçš„è¿ç®—ç»“æœã€‚å¦‚MLIA ä¸­çš„å®ä¾‹ï¼š
```python
import numpy as np  #å°†NumPyå‡½æ•°åº“ä¸­çš„æ‰€æœ‰æ¨¡å—å¼•å…¥åˆ°å½“å‰å‘½åç©ºé—´ 
arrayX = np.random.rand(2,2)   
print(arrayX)   
randMatric = np.mat(arrayX) #å°†æ•°ç»„arrayè½¬æ¢æˆçŸ©é˜µmatrix  
print(randMatric)   
invRandMatric = randMatric.I #.Iæ“ä½œå®ç°äº†é€†çŸ©é˜µçš„è¿ç®—   
print(invRandMatric)   
myEye = randMatric*invRandMatric #çŸ©é˜µä¸å…¶é€†çŸ©é˜µç›¸ä¹˜   
print(myEye) print(myEye-np.eye(2)) #np.eye()åˆ›å»º4X4çš„å•ä½çŸ©é˜µ

è¾“å‡ºç»“æœä¸ºï¼š

> [[ 0.06837544  0.61489627]  
 [ 0.32350553  0.79551299]]  
[[ 0.06837544  0.61489627]  
 [ 0.32350553  0.79551299]]  
[[-5.50418341  4.25448969]  
 [ 2.23834657 -0.47309214]]  
[[  1.00000000e+00  -2.62120939e-18]  
 [  4.98500312e-17   1.00000000e+00]]  
[[  0.00000000e+00  -2.62120939e-18]  
 [  4.98500312e-17   2.22044605e-16]]
```

## ndarrayå¯¹è±¡æ•°ç»„å±æ€§

### æ•°ç»„çš„è½´ ndarray.ndim

æ•°ç»„çš„è½´ï¼ˆç»´åº¦ï¼Œdimensionalityï¼‰çš„ä¸ªæ•°ã€‚åœ¨Pythonä¸–ç•Œä¸­ï¼Œç»´åº¦çš„æ•°é‡è¢«ç§°ä¸ºrankã€‚

```python
import numpy as np
x = np.array([[1,2,3],[4,5,6]])
print(x)
print(x.ndim)

#è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š 
array([[1, 2, 3],
       [4, 5, 6]])
2
```

### æ•°ç»„çš„ç»´åº¦ ndarray.shape

æ•°ç»„çš„ç»´åº¦ï¼Œæ˜¯ä¸€ä¸ªæ•´æ•°çš„å…ƒç»„ï¼Œè¡¨ç¤ºæ¯ä¸ªç»´åº¦ä¸­æ•°ç»„çš„å¤§å°ã€‚

å¯¹äºå…·æœ‰nè¡Œå’Œmåˆ—çš„çŸ©é˜µï¼Œshapeå°†æ˜¯(n,m)ã€‚å› æ­¤ï¼Œshapeå…ƒç»„çš„é•¿åº¦å°±æ˜¯rankæˆ–ç»´åº¦çš„ä¸ªæ•°ndimã€‚

```python
....
print(x.shape)
#è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š
 (2, 3)
```
### æ•°ç»„å…ƒç´ çš„æ€»æ•° ndarray.size

æ•°ç»„å…ƒç´ çš„æ€»æ•°ã€‚è¿™ç­‰äºshapeçš„å…ƒç´ çš„ä¹˜ç§¯ã€‚

ç¤ºä¾‹ï¼š
```python
....
print(x.size)	 # 6
```

### æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ çš„å­—èŠ‚å¤§å°. ndarray.itemsize

ä¾‹å¦‚ï¼Œå…ƒç´ ä¸ºfloat64ç±»å‹çš„æ•°ç»„çš„itemsizeä¸º8ï¼ˆ=64/8ï¼‰ï¼Œè€Œcomplex32ç±»å‹çš„æ•°ç»„çš„comitemsizeä¸º4ï¼ˆ=32/8ï¼‰ã€‚å®ƒç­‰äºndarray.dtype.itemsizeã€‚

```python
import numpy as np
x = np.array([[1,2,3],[4,5,6]])
y = np.array([1.,2,3])
z = np.array([1.,2,3],dtype=np.int64)
print(x.dtype)
print(x.itemsize)
print(y.dtype)
print(y.itemsize)
print(z.dtype)
print(z.itemsize)
# è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š
int32
4
float64
8
int64
8
```

### æ•°ç»„æ­¥é•¿å¹…åº¦  ndarray.strides

```python
import numpy as np
x = np.array([[1,2,3],[4,5,6]])
print(x.strides)
#è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š
(12, 4) 		#ä¸€è¡Œ3ä¸ªå…ƒç´ ï¼Œæ¯ä¸ªå¤§å°4å­—èŠ‚
y = np.array([[1,2],[3,4],[5,6]])
print(y.strides)
#è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š
(8, 4) 			#ä¸€è¡Œ2ä¸ªå…ƒç´ ï¼Œæ¯ä¸ªå¤§å°8å­—èŠ‚
z = np.array([1.,2,3],dtype=np.int64)
print(z.strides)
#è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š
(8,)			#åªæœ‰1è¡Œï¼Œæ¯ä¸ªå¤§å°8å­—èŠ‚
```
	
### ndarray.data

è¯¥ç¼“å†²åŒºåŒ…å«æ•°ç»„çš„å®é™…å…ƒç´ ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬ä¸éœ€è¦ä½¿ç”¨æ­¤å±æ€§ï¼Œå› ä¸ºæˆ‘ä»¬å°†ä½¿ç”¨ç´¢å¼•è®¿é—®æ•°ç»„ä¸­çš„å…ƒç´ ã€‚

### å­˜æ”¾æ•°ç»„è‡ªèº«çš„ç›¸å…³ä¿¡æ¯ï¼šndarray.flags

â€”â€”â€”â€”contiguousï¼šè¿ç»­çš„

```python
x = np.array([[1,2,3],[4,5,6]])
print(x.flags)
print(x.flags.owndata)
print(x.flags.writeable)
#è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š
 Â C_CONTIGUOUS : True#
 Â F_CONTIGUOUS : False
 Â OWNDATA : True			#è‡ªèº«æ•°æ®ï¼ˆåŒºåˆ«æŒ‡é’ˆæŒ‡å‘ï¼‰
 Â WRITEABLE : True			#å¯å†™
 Â ALIGNED : True 			#æ˜¯å¦å¯¹é½
 Â UPDATEIFCOPY : False			#å¤åˆ¶æ˜¯å¦æ›´æ–°		
True
True
```

### æ•°ç»„ä¸­å…ƒç´ ç±»å‹ ndarray.dtype

Numpyæ”¯æŒæ¯”Pythonæ›´å¤šç§ç±»çš„æ•°å€¼ç±»å‹ã€‚æ­¤éƒ¨åˆ†æ˜¾ç¤ºäº†å“ªäº›å¯ç”¨çš„ï¼Œä»¥åŠå¦‚ä½•ä¿®æ”¹æ•°ç»„çš„æ•°æ®ç±»å‹ã€‚

æè¿°æ•°ç»„ä¸­å…ƒç´ ç±»å‹çš„å¯¹è±¡ã€‚å¯ä»¥ä½¿ç”¨æ ‡å‡†Pythonç±»å‹åˆ›å»ºæˆ–æŒ‡å®šdtypeã€‚å¦å¤–NumPyæä¾›äº†è‡ªå·±çš„ç±»å‹ã€‚

ä¾‹å¦‚numpy.int32ã€numpy.int16å’Œnumpy.float64ã€‚

```python
print(x.dtype)		# int32
dtype('int32')
#æ³¨æ„ä»¥ä¸‹ç±»å‹è½¬æ¢
y = np.array([1.,2,3])	
print(y)
print(y.dtype)		# dtype('float64')
#è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š
[ 1.  2.  3.]
float64
```

### NumPyä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹å–å€¼èŒƒå›´

|åç§°| æè¿°|
|---|---|
|bool 		|ç”¨ä¸€ä¸ªBitå­˜å‚¨çš„å¸ƒå°”ç±»å‹ï¼ˆTrueæˆ–Falseï¼‰ |
|inti 		|ç”±æ‰€åœ¨å¹³å°å†³å®šå…¶å¤§å°çš„æ•´æ•°ï¼ˆä¸€èˆ¬ä¸ºint32æˆ–int64ï¼‰ |
|int8 		|ä¸€ä¸ªå­—èŠ‚å¤§å°ï¼Œ-128 è‡³ 127 |
|int16 		|æ•´æ•°ï¼Œ-32768 è‡³ 32767 |
|int32 		|æ•´æ•°ï¼Œ-2 ** 31 è‡³ 2 ** 32 -1 |
|int64 		|æ•´æ•°ï¼Œ-2 ** 63 è‡³ 2 ** 63 - 1 |
|uint8 		|æ— ç¬¦å·æ•´æ•°ï¼Œ0 è‡³ 255 |
|uint16 	|æ— ç¬¦å·æ•´æ•°ï¼Œ0 è‡³ 65535 |
|uint32 	|æ— ç¬¦å·æ•´æ•°ï¼Œ0 è‡³ 2 ** 32 - 1 |
|uint64  	|æ— ç¬¦å·æ•´æ•°ï¼Œ0 è‡³ 2 ** 64 - 1 |
|float16 	|åŠç²¾åº¦æµ®ç‚¹æ•°ï¼š16ä½ï¼Œæ­£è´Ÿå·1ä½ï¼ŒæŒ‡æ•°5ä½ï¼Œç²¾åº¦10ä½ |
|float32 	|å•ç²¾åº¦æµ®ç‚¹æ•°ï¼š32ä½ï¼Œæ­£è´Ÿå·1ä½ï¼ŒæŒ‡æ•°8ä½ï¼Œç²¾åº¦23ä½ |
|float64æˆ–float 	|åŒç²¾åº¦æµ®ç‚¹æ•°ï¼š64ä½ï¼Œæ­£è´Ÿå·1ä½ï¼ŒæŒ‡æ•°11ä½ï¼Œç²¾åº¦52ä½ |
|complex64 	|å¤æ•°ï¼Œåˆ†åˆ«ç”¨ä¸¤ä¸ª32ä½æµ®ç‚¹æ•°è¡¨ç¤ºå®éƒ¨å’Œè™šéƒ¨ |
|complex128æˆ–complex |å¤æ•°ï¼Œåˆ†åˆ«ç”¨ä¸¤ä¸ª64ä½æµ®ç‚¹æ•°è¡¨ç¤ºå®éƒ¨å’Œè™šéƒ¨ |

### ç±»å‹åç§°ä½¿ç”¨è§„åˆ™

Numpyæ•°å€¼ç±»å‹æ˜¯dtypeï¼ˆdata-typeï¼‰å¯¹è±¡çš„å®ä¾‹ï¼Œæ¯ä¸ªç±»å‹å…·æœ‰å”¯ä¸€çš„ç‰¹å¾ã€‚ä½¿ç”¨æ–¹å¼æœ‰ï¼š

#### ç›´æ¥ä½¿ç”¨ 

```python
np.array([1],dtype=complex).dtype
dtype('complex128')
```

#### æ·»åŠ npåŒ…åå‰ç¼€ï¼Œé¿å…å†²çª

åœ¨ä½ ä½¿ç”¨ä¸‹é¢çš„è¯­å¥å¯¼å…¥NumPyå,è¿™äº›ç±»å‹å¯ä»¥ç”¨np.bool_ã€np.float32ç­‰æ–¹å¼è®¿é—®

```python
import numpy as np

np.array([1],dtype=np.complex).dtype		# dtype('complex128')
```

#### ä½¿ç”¨å­—ç¬¦ç®€ç§°


```python
print(np.array([1],dtype='c16').dtype)		#dtype('complex128')
```
ç®€ç§°å‰å¯ä»¥åŠ ` '|','<','>'`,åˆ†åˆ«è¡¨ç¤ºï¼š

`| `: å¿½è§†å­—èŠ‚é¡ºåº

`<` : ä½ä½å­—èŠ‚åœ¨å‰,å°ç«¯ little endian

`> `: é«˜ä½å­—èŠ‚åœ¨å‰,å¤§ç«¯ï¼Œbig endian

ä¾‹å¦‚:a = 0x12345678

- å°ç«¯ï¼š
 00	01	02	03
 
|78	|56 	|34 	|12

- å¤§ç«¯ï¼š
 00	01	02	03
 
|12|	34 |	56 |	78

>>> np.array([1],dtype='<i8').dtype

æœ‰å…³ç±»å‹åç§°åŠç®€ç§°ï¼Œå…·ä½“å‚è€ƒä¸‹è¡¨ï¼š

|np.ç±»å‹å	|  å¯¹åº”äºåˆ«çš„è¯­è¨€çš„ç±»å‹  |å­—ç¬¦ç®€ç§°ï¼ˆç±»å‹ä»£ç ï¼‰|
|----------|---------------------|-----------------|
|**Booleans**   |--|	---|
|np.bool_ |Python bool |'?' |
|np.bool8 |8 bit bool  ||       	
|**Int** |       |	|
|np.byte  |	C char 	| 'b' |
|np.short |	C short |'h' |
|np.intc  |	C int   | 'i'   #int32 |
|np.int_ |	|Python int |'l' |
|np.longlong |	C long long | 'q' |
|np.intp 	|ç”¨ä½œæŒ‡é’ˆ?? |'p' |
|np.int8	|ç‰¹å®šé•¿åº¦	|'i1'|
|np.int16	|ç‰¹å®šé•¿åº¦	|'i2'|
|np.int32	|ç‰¹å®šé•¿åº¦	|'i4'|
|np.int64 	|ç‰¹å®šé•¿åº¦   |'i8'| 	
|**Unsigned Int**||| 
|np.ubyte |C unsigned char |'B' |
|np.ushort |C unsigned short |'H' |
|np.uintc |C unsigned int |'I' |
|np.uint_ |Python unsigned int 	|'L' |
|np.ulonglong 	|C unsigned long long 	|'Q' |
|np.uintp |ç”¨ä½œæŒ‡é’ˆ?? |'P' |
|np.uint8|ç‰¹å®šé•¿åº¦	|'u1'|
|np.uint16|ç‰¹å®šé•¿åº¦	|'u2'|
|np.uint32|ç‰¹å®šé•¿åº¦	|'u4'|
|np.uint64 |ç‰¹å®šé•¿åº¦ |'u8'|
|**Float** |||
|np.single |C float |'f' |
|np.double |C double  ||
|np.float_ |Python float|'d' |
|np.longfloat|C long float |'g' |
|np.float32|ç‰¹å®šé•¿åº¦|'f4'|
|np.float64|ç‰¹å®šé•¿åº¦|'f8'|
|np.float96|ä¾èµ–äºå¹³å°|
|np.float128 |ä¾èµ–äºå¹³å°|'f16'|
|**Complex(å¤æ•°)** |||
|np.csingle   ||'F' |
|np.complex_ |	Python complex 	|'D' 
|np.clongfloat |ç‰¹å®šé•¿åº¦|'G' 
|np.complex64	|ç‰¹å®šé•¿åº¦|'c8'
|np.complex128	|ç‰¹å®šé•¿åº¦|'c16'
|np.complex192	|ä¾èµ–äºå¹³å°||
|np.complex256| ä¾èµ–äºå¹³å°|'c32'|
|**Any Python Object** |||
|np.object_ |ä¿å­˜çš„å®é™…æ˜¯å¼•ç”¨ |'O' |
|np.str_ |Python str |'S#' # = number #æ§åˆ¶æ¯ä¸ªstré•¿åº¦ |
|np.unicode_ 	|Python unicode |'U#' |
|void 	||	'V#' |


### ç±»å‹è½¬æ¢ï¼š

```python
import numpy as np

x = np.array([1,2,3],dtype = np.float64)
print(x)		#[ 1.  2.  3.]
print(x.dtype)          #float64
y = x.astype(np.int64)	#astype()ä¸èƒ½ç›´æ¥ä½œç”¨äºåŸå®ä¾‹
print(y)           	#[1 2 3]
print(y.dtype)      	#int64	
```
